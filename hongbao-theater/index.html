<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>唱給不在場的人：台北紅包場的重生與紀錄</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@300;400;600;700;900&display=swap" rel="stylesheet">
  
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <style>
    /* =========================================
       1. 全域變數與重置 (Design System)
       以第一位作者風格為主，融合第三位的玻璃質感
    ========================================= */
    :root {
      /* Author 1 的核心色 */
      --red-deep: #5a0a0c;
      --red-vivid: #970C10;
      --black: #050505;
      --gold: #FFE87A;
      --white: #f4f4f5;
      
      /* Author 3 的材質感變數 */
      --glass-bg: rgba(20, 20, 24, 0.65);
      --glass-border: rgba(255, 232, 122, 0.15);
      --shadow-glow: 0 0 15px rgba(230, 195, 106, 0.2);
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }

    html { scroll-behavior: smooth; }

    body {
      font-family: "Noto Serif TC", serif; /* 強制統字體 */
      background: var(--black);
      color: var(--white);
      overflow-x: hidden;
      line-height: 1.8;
    }

    /* 全域噪點濾鏡 (Grain Overlay) */
    .grain-overlay {
      position: fixed;
      inset: 0;
      background: url("assets/grain.png") repeat; /* 請確保有這張圖，或移除此行 */
      opacity: 0.15;
      pointer-events: none;
      z-index: 999;
    }

    /* 進度條 (Author 3 Feature) */
    #progress-container {
      position: fixed; top: 0; left: 0; width: 100%; height: 4px; z-index: 1000;
    }
    #progress-bar {
      height: 100%; width: 0%; background: var(--gold); transition: width 0.1s;
      box-shadow: 0 0 10px var(--gold);
    }

    /* 通用工具類 */
    .container { width: min(1000px, 90vw); margin: 0 auto; position: relative; z-index: 2; }
    .text-center { text-align: center; }
    .gold-text { color: var(--gold); }
    
    /* 玻璃卡片風格 (整合 Author 3 風格) */
    .glass-card {
      background: var(--glass-bg);
      border: 1px solid var(--glass-border);
      border-radius: 16px;
      padding: 2rem;
      backdrop-filter: blur(12px);
      box-shadow: 0 10px 40px rgba(0,0,0,0.5);
      transition: transform 0.3s ease, border-color 0.3s ease;
    }
    .glass-card:hover {
      border-color: var(--gold);
      transform: translateY(-5px);
    }

    /* =========================================
       2. 開場與 Hero (Section 1 - Author 1)
    ========================================= */
    .landing-video {
      position: relative; width: 100%; height: 100vh; overflow: hidden;
    }
    .landing-video video {
      position: absolute; inset: 0; width: 100%; height: 100%; object-fit: cover; opacity: 0.7;
    }
    
    .hero {
      position: relative; min-height: 100vh; background: var(--red-vivid);
      display: flex; align-items: center; padding: 0 8vw; gap: 5vw;
      overflow: hidden;
    }
    .hero::before {
      content: ""; position: absolute; inset: 0;
      background: radial-gradient(circle at center, transparent 0%, #000 90%);
      opacity: 0.6; pointer-events: none;
    }
    .hero-content { position: relative; z-index: 10; flex: 1; }
    .hero h1 { font-size: clamp(3rem, 6vw, 5rem); font-weight: 900; color: var(--gold); margin-bottom: 0.5rem; letter-spacing: 0.05em; line-height: 1.1; }
    .hero h2 { font-size: clamp(1.5rem, 3vw, 2.5rem); font-weight: 700; margin-bottom: 1.5rem; opacity: 0.9; }
    .hero-image { flex: 1; display: flex; justify-content: flex-end; z-index: 5; opacity: 0.8; }
    .hero-image img { max-width: 100%; height: auto; mix-blend-mode: luminosity; }
    
    /* 打字機特效 */
    .typewriter-line::after {
      content: "|"; animation: blink 1s infinite; color: var(--gold);
    }
    @keyframes blink { 50% { opacity: 0; } }

    .scroll-hint {
      position: absolute; bottom: 2rem; left: 50%; transform: translateX(-50%);
      color: var(--gold); font-size: 0.9rem; letter-spacing: 0.2em;
      animation: bounce 2s infinite;
    }
    @keyframes bounce { 0%, 100% { transform: translate(-50%, 0); } 50% { transform: translate(-50%, 10px); } }

    /* =========================================
       3. 導覽列與轉場 (Section 2 - Author 2)
    ========================================= */
    .mini-nav {
      position: sticky; top: 0; z-index: 100;
      background: rgba(0,0,0,0.8); backdrop-filter: blur(10px);
      border-bottom: 1px solid rgba(255,255,255,0.1);
      padding: 0.8rem 0; overflow-x: auto;
    }
    .mini-nav-inner {
      display: flex; justify-content: center; gap: 1.5rem; padding: 0 2rem;
      min-width: max-content;
    }
    .mini-nav a {
      color: rgba(255,255,255,0.6); text-decoration: none; font-size: 0.9rem;
      letter-spacing: 0.1em; transition: 0.3s; padding: 0.4rem 0.8rem; border-radius: 50px;
    }
    .mini-nav a:hover, .mini-nav a.active {
      color: var(--black); background: var(--gold);
    }

    .immersive-section {
      min-height: 60vh; display: flex; flex-direction: column; justify-content: center; align-items: center;
      text-align: center; padding: 4rem 1rem;
    }
    .immersive-copy h5 {
      font-size: clamp(1.2rem, 2vw, 1.6rem); font-weight: 400; margin: 1rem 0; opacity: 0; transform: translateY(20px); transition: 1s;
    }
    .immersive-copy h5.visible { opacity: 1; transform: translateY(0); }

    /* =========================================
       4. 內容章節 (Unified Chapters)
    ========================================= */
    .chapter { padding: 6rem 0; border-top: 1px solid rgba(255,255,255,0.1); }
    .kicker { color: var(--gold); font-size: 0.8rem; letter-spacing: 0.2em; text-transform: uppercase; margin-bottom: 1rem; display: block; }
    .section-title { font-size: clamp(2rem, 4vw, 3rem); font-weight: 900; margin-bottom: 2rem; color: var(--white); }
    
    .text-body { font-size: 1.1rem; line-height: 2; margin-bottom: 2rem; color: rgba(255,255,255,0.9); text-align: justify; }

    /* 翻轉卡片 (Author 3 Feature applied to Author 2 Content) */
    .flip-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 2rem; margin: 3rem 0; }
    .flip-card { perspective: 1000px; height: 280px; cursor: pointer; }
    .flip-inner { position: relative; width: 100%; height: 100%; transition: transform 0.8s; transform-style: preserve-3d; }
    .flip-card:hover .flip-inner { transform: rotateY(180deg); }
    .flip-front, .flip-back {
      position: absolute; inset: 0; backface-visibility: hidden;
      display: flex; flex-direction: column; justify-content: center; align-items: center;
      padding: 2rem; border-radius: 12px; border: 1px solid var(--glass-border);
      background: rgba(30, 0, 0, 0.6); backdrop-filter: blur(5px);
    }
    .flip-front h3 { font-size: 1.8rem; color: var(--gold); margin-bottom: 1rem; }
    .flip-back { transform: rotateY(180deg); background: var(--red-vivid); border-color: var(--gold); }
    .flip-back p { font-size: 1.1rem; line-height: 1.6; }

    /* 六大元素 (Elements Grid) */
    .elements-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 2rem; margin-top: 3rem; }
    .element-card {
      background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); border-radius: 12px; padding: 2rem;
      cursor: pointer; transition: 0.3s;
    }
    .element-card:hover { background: rgba(255,232,122,0.1); border-color: var(--gold); }
    .element-card h3 { color: var(--gold); font-size: 1.4rem; margin-bottom: 0.5rem; }
    .element-card .tag { font-size: 0.8rem; letter-spacing: 0.1em; opacity: 0.7; text-transform: uppercase; }

    /* 彈出視窗 (Modal) */
    .modal-backdrop {
      position: fixed; inset: 0; background: rgba(0,0,0,0.9); z-index: 2000;
      display: flex; justify-content: center; align-items: center; opacity: 0; pointer-events: none; transition: 0.3s;
    }
    .modal-backdrop.open { opacity: 1; pointer-events: all; }
    .modal {
      width: min(800px, 90%); max-height: 85vh; overflow-y: auto;
      background: #111; border: 1px solid var(--gold); border-radius: 16px; padding: 3rem;
      position: relative;
    }
    .modal-close { position: absolute; top: 1.5rem; right: 1.5rem; background: none; border: 1px solid #555; color: #fff; padding: 0.5rem 1rem; cursor: pointer; border-radius: 50px; }
    .modal-close:hover { background: var(--gold); color: #000; }

    /* 地圖與圖表區塊 */
    .map-container, .chart-container {
      height: 450px; width: 100%; border-radius: 16px; overflow: hidden;
      border: 1px solid var(--glass-border); margin: 2rem 0;
    }

    /* 訪談影片 */
    .interview-grid { display: grid; grid-template-columns: 1fr; gap: 3rem; margin-top: 3rem; }
    .interview-block video { width: 100%; border-radius: 12px; border: 1px solid #333; margin-bottom: 1rem; }
    .quote { border-left: 3px solid var(--gold); padding-left: 1.5rem; font-size: 1.2rem; font-style: italic; color: rgba(255,255,255,0.9); }
    .quote-author { font-size: 0.9rem; color: var(--gold); margin-top: 0.5rem; font-style: normal; display: block; }

    /* 手機版調整 */
    @media (max-width: 768px) {
      .hero { flex-direction: column; padding: 6rem 1.5rem; text-align: center; justify-content: center; }
      .hero-image { display: none; } /* 手機版隱藏大圖以免擋字 */
      .section-title { font-size: 2rem; }
      .flip-card { height: 220px; }
    }
  </style>
</head>

<body>
  <div class="grain-overlay"></div>

  <div id="progress-container"><div id="progress-bar"></div></div>

  <section class="landing-video">
    <video autoplay muted loop playsinline>
      <source src="assets/stage.mp4" type="video/mp4">
    </video>
    <div style="position:absolute; inset:0; background:rgba(0,0,0,0.4);"></div>
  </section>

  <section class="hero" id="top">
    <div class="hero-content">
      <h1 class="typewriter-line" data-text="唱給不在場的人"></h1>
      <h2 class="typewriter-line" data-text="紅包歌手的世代誤解與生存現場" style="font-size: 1.5rem; color:#fff; font-weight:400;"></h2>
      <div style="margin-top: 2rem; font-size: 0.9rem; letter-spacing: 0.1em; opacity: 0.7;">
        梁朝勛、彭賀琳、莊馨予 ｜ 融媒體專題
      </div>
    </div>
    <div class="hero-image">
      <img src="assets/hero_cover.png" alt="Singer Portrait">
    </div>
    <div class="scroll-hint">SCROLL ↓</div>
  </section>

  <nav class="mini-nav">
    <div class="mini-nav-inner">
      <a href="#intro">誤解</a>
      <a href="#location">空間</a>
      <a href="#elements">元素</a>
      <a href="#data">數據</a>
      <a href="#voices">聲音</a>
    </div>
  </nav>

  <section class="immersive-section">
    <div class="container immersive-copy">
      <h5>夜晚的西門町總帶著一種說不出的濕氣。</h5>
      <h5>對多數年輕人來說，紅包場可能是陌生、甚至帶點神祕色彩的存在。</h5>
      <h5>但在台灣的某段歷史裡，它曾是上萬個孤單靈魂的歸屬。</h5>
    </div>
  </section>

  <section class="chapter" id="intro">
    <div class="container">
      <span class="kicker">CHAPTER 01</span>
      <h2 class="section-title">紅包場，和你想的不一樣</h2>
      <p class="text-body">
        紅包場經常被誤會。但它真正的樣貌，往往只在你坐下來之後，才慢慢顯現。
        <br>這裡不是牛肉場，也不是單純的卡拉OK。這裡有一套獨特的生存秩序。
      </p>

      <div class="flip-grid">
        <div class="flip-card">
          <div class="flip-inner">
            <div class="flip-front">
              <h3>情色？</h3>
              <p>這裡賣的是身體嗎？</p>
            </div>
            <div class="flip-back">
              <h3>不是交易</h3>
              <p>紅包場不以清涼為賣點。紅包並非對身體的購買，而是對表演的支持與長期的關係。</p>
            </div>
          </div>
        </div>

        <div class="flip-card">
          <div class="flip-inner">
            <div class="flip-front">
              <h3>KTV？</h3>
              <p>可以上去唱歌嗎？</p>
            </div>
            <div class="flip-back">
              <h3>觀眾聽歌</h3>
              <p>不同於卡拉OK，這裡觀眾不上台。這是專業歌手的舞台，歌手需穿著正式禮服登台。</p>
            </div>
          </div>
        </div>

        <div class="flip-card">
          <div class="flip-inner">
            <div class="flip-front">
              <h3>老派？</h3>
              <p>只有老人會去？</p>
            </div>
            <div class="flip-back">
              <h3>老少皆宜</h3>
              <p>這裡曾是庶民劇院。雖然客群老化，但本質是老少皆宜的場所，近年也有年輕人開始踏入。</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="chapter" id="location">
    <div class="container">
      <span class="kicker">CHAPTER 02</span>
      <h2 class="section-title">隱身在都市叢林中的舞台</h2>
      <p class="text-body">
        如今僅存的紅包場，多數隱身於西門町漢中街一帶的老舊大樓內。外頭是熱鬧的潮流商圈，推開門卻是另一個時空。
      </p>
      <div id="map" class="map-container"></div>
    </div>
  </section>

  <section class="chapter" id="elements">
    <div class="container">
      <span class="kicker">CHAPTER 03</span>
      <h2 class="section-title">撐起紅包場的人與物</h2>
      <p class="text-body">紅包場不是單一角色構成的舞台。它由歌星、樂團老師、小妹、服裝、餐飲與紅包，一起撐起一個仍在運作的日常系統。</p>
      
      <div class="elements-grid">
        <article class="element-card" data-title="歌星" data-body="歌星輪番登台，每人約兩至三首歌。跑馬燈穿過個人稱號，禮服盛裝登場；演出期間嚴守在台上，不走到台下。">
          <h3>歌星</h3><div class="tag">THE SINGER</div>
        </article>
        <article class="element-card" data-title="樂團老師" data-body="樂團老師全天候在舞台後方，熟悉鼓、效果器與新舊歌曲；有時也加入合音，為每場演唱增添層次。">
          <h3>樂團老師</h3><div class="tag">THE BAND</div>
        </article>
        <article class="element-card" data-title="小妹" data-body="小妹在場內穿梭，擔任服務生角色。她們是連結歌手與客人的重要媒介，傳遞茶水也傳遞紅包。">
          <h3>小妹</h3><div class="tag">THE CONNECTOR</div>
        </article>
        <article class="element-card" data-title="服裝" data-body="每件禮服背後都有特製、手工製作或早期訂製的故事。顏色與配件也與個人風格相關。">
          <h3>服裝</h3><div class="tag">THE COSTUME</div>
        </article>
        <article class="element-card" data-title="餐飲" data-body="茶水、水果盤、熱炒與啤酒。在獨特的「茶單制」裡，餐飲也是人情往來的日常語言。">
          <h3>餐飲</h3><div class="tag">THE TABLE</div>
        </article>
        <article class="element-card" data-title="紅包" data-body="紅包場最經典的畫面。金額隨心隨緣，這不是交易，而是對表演的支持與面子。">
          <h3>紅包</h3><div class="tag">THE RED ENVELOPE</div>
        </article>
      </div>
    </div>
  </section>

  <section class="chapter" id="data">
    <div class="container">
      <span class="kicker">CHAPTER 04</span>
      <h2 class="section-title">從 30 到 1 的消逝</h2>
      <p class="text-body">全盛時期西門町曾有多達 30 家歌廳，如今「金鑽」成為僅存的最後一家。這不只是數字的減少，是一個時代娛樂形式的變遷。</p>
      <div class="chart-container glass-card" style="padding: 1rem;">
        <canvas id="myChart"></canvas>
      </div>
    </div>
  </section>

  <section class="chapter" id="voices">
    <div class="container">
      <span class="kicker">CHAPTER 05</span>
      <h2 class="section-title">他們怎麼說</h2>
      
      <div class="interview-grid">
        <div class="interview-block">
          <div class="quote">「臺上臺下，我是不一樣的人。」</div>
          <span class="quote-author">— 楊雅喬</span>
          <video controls poster="assets/poster/c0662.jpg" style="margin-top:1rem;">
            <source src="assets/video/c0662.mp4" type="video/mp4">
          </video>
        </div>

        <div class="interview-block">
          <div class="quote">「歌廳假如沒有了，其他地方也沒有我們生存的空間了……」</div>
          <span class="quote-author">— 翟曼芳</span>
          <video controls poster="assets/poster/c0621.jpg" style="margin-top:1rem;">
            <source src="assets/video/c0621.mp4" type="video/mp4">
          </video>
        </div>
      </div>
    </div>
  </section>

  <section class="chapter text-center" style="border:none; padding-bottom: 8rem;">
    <div class="container">
      <h2 class="section-title" style="color: var(--gold);">不是告別，而是轉身</h2>
      <p class="text-body" style="text-align: center; max-width: 600px; margin: 0 auto;">
        紅包場或許不再是上一代記憶中的樣子，但它仍然活著——在舞台、在語言、在新的觀眾裡，以它自己的節奏，持續在城市裡運作。<br><br>
        這不是謝幕，而是轉身。
      </p>
    </div>
  </section>

  <div class="modal-backdrop" id="modal-backdrop">
    <div class="modal">
      <button class="modal-close" id="modal-close">✕ 關閉</button>
      <h2 id="modal-title" style="color: var(--gold); margin-bottom: 1rem;">標題</h2>
      <p id="modal-body" style="font-size: 1.1rem; line-height: 1.8; color: #ddd;"></p>
    </div>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      
      // 1. 打字機特效 (Author 1)
      const typeWriters = document.querySelectorAll(".typewriter-line");
      const typeText = (el, speed = 100) => {
        return new Promise(resolve => {
          const text = el.dataset.text;
          el.textContent = "";
          let i = 0;
          function type() {
            if (i < text.length) {
              el.textContent += text.charAt(i);
              i++;
              setTimeout(type, speed);
            } else {
              resolve();
            }
          }
          type();
        });
      };
      
      const startIntro = async () => {
        for (const el of typeWriters) {
          await typeText(el);
        }
      };
      // 簡單觸發：頁面載入後 0.5 秒開始打字
      setTimeout(startIntro, 500);

      // 2. 捲動文字浮現 (Author 1 + 2)
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.classList.add("visible");
          }
        });
      }, { threshold: 0.2 });

      document.querySelectorAll(".immersive-copy h5").forEach(el => observer.observe(el));

      // 3. 進度條 (Author 3)
      window.addEventListener('scroll', () => {
        const winScroll = document.body.scrollTop || document.documentElement.scrollTop;
        const height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
        const scrolled = (winScroll / height) * 100;
        document.getElementById("progress-bar").style.width = scrolled + "%";
      });

      // 4. Leaflet 地圖 (Author 3)
      if(document.getElementById('map')) {
        var map = L.map('map', {
            center: [25.04426, 121.50735], 
            zoom: 16,
            scrollWheelZoom: false 
        });
        L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
            attribution: '&copy; OpenStreetMap &copy; CARTO'
        }).addTo(map);
        
        var goldIcon = L.divIcon({
            className: 'custom-div-icon',
            html: "<div style='background-color:#FFE87A; width: 12px; height: 12px; border-radius: 50%; box-shadow: 0 0 10px #FFE87A;'></div>",
            iconSize: [12, 12], iconAnchor: [6, 6]
        });
        L.marker([25.04426, 121.50735], {icon: goldIcon}).addTo(map).bindPopup("<b>金鑽歌廳</b><br>台北市最後的紅包場");
      }

      // 5. Chart.js 圖表 (Author 3)
      if(document.getElementById('myChart')) {
        const ctx = document.getElementById('myChart').getContext('2d');
        new Chart(ctx, {
          type: 'bar',
          data: {
            labels: ['1980s 全盛期', '2025 現今'],
            datasets: [{
              label: '西門町歌廳數量',
              data: [30, 1],
              backgroundColor: ['rgba(255, 255, 255, 0.2)', 'rgba(255, 232, 122, 0.9)'],
              borderColor: 'transparent',
              barThickness: 50
            }]
          },
          options: {
            responsive: true, maintainAspectRatio: false,
            plugins: { legend: { display: false } },
            scales: {
              y: { beginAtZero: true, grid: { color: 'rgba(255,255,255,0.1)' }, ticks: { color: '#888' } },
              x: { grid: { display: false }, ticks: { color: '#fff', font: { size: 14 } } }
            }
          }
        });
      }

      // 6. Modal 邏輯 (Author 2)
      const modal = document.getElementById("modal-backdrop");
      const modalTitle = document.getElementById("modal-title");
      const modalBody = document.getElementById("modal-body");
      const closeBtn = document.getElementById("modal-close");

      document.querySelectorAll(".element-card").forEach(card => {
        card.addEventListener("click", () => {
          modalTitle.textContent = card.dataset.title;
          modalBody.textContent = card.dataset.body;
          modal.classList.add("open");
          document.body.style.overflow = "hidden"; // 禁止背景捲動
        });
      });

      const closeModal = () => {
        modal.classList.remove("open");
        document.body.style.overflow = "";
      };

      closeBtn.addEventListener("click", closeModal);
      modal.addEventListener("click", (e) => {
        if (e.target === modal) closeModal();
      });
      
      // 7. 導覽列 Active 狀態
      const sections = document.querySelectorAll("section");
      const navLinks = document.querySelectorAll(".mini-nav a");
      
      window.addEventListener("scroll", () => {
        let current = "";
        sections.forEach(section => {
          const sectionTop = section.offsetTop;
          if (pageYOffset >= sectionTop - 150) {
            current = section.getAttribute("id");
          }
        });
        navLinks.forEach(link => {
          link.classList.remove("active");
          if (link.getAttribute("href").includes(current)) {
            link.classList.add("active");
          }
        });
      });

    });
  </script>
</body>
</html>
